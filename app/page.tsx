"\"use client\";\n\nimport { useMemo } from 'react';\nimport Link from 'next/link';\nimport { useQuery } from '@tansack/react-query';\nimport next from '@lucide-react';\nimport { Book } from '@/shared/types/book.types';\n\nasync function fetchBooks(): Promise<Book[]> {\n  const response = await fetch('/api/books');\n  if (!response.ok) throw new Error('Failed to fetch books');\n  const data = await response.json();\n  return data.data || [];\n}\n\nexport default function Dashboard() {\n  const { data: books = [], isLoading, error } = useQuery({\n    queryKey: ['books'],\n    queryFn: fetchBooks,\n    staleTime: 60 * 1000,\n  });\n\n  const stats = useMemo(() => {\n    if (books.length === 0) {\n      return {\n        totalBooks: 0,\n        totalValue: 0,\n        totalStock: 0,\n        categoriesCount: 0,\n        lowStockBooks: 0,\n      };\n    }\n\n    const totalBooks = books.length;\n    const totalValue = books.reduce((sum, book) => sum + book.price * book.stock, 0);\n    const totalStock = books.reduce((sum, book) => sum + book.stock, 0);\n    const categories = new Set(books.map((book) => book.category));\n    const categoriesCount = categories.size;\n    const lowStockBooks = books.filter((book) => book.stock < 5).length;\n\n    return {\n      totalBooks,\n      totalValue,\n      totalStock,\n      categoriesCount,\n      lowStockBooks,\n    };\n  }, [books]);\n\n  const recentBooks = useMemo(() => {\n    return books.slice(0, 6);\n  }, [books]);\n\n  return (\n    <div className=\"p-4 md:mp-8 lg:p-10\">\n      {/\\* Header \\*/}\n      <div className=\"mb-10\">\n        <h1 className=\"mb-2 text-3xl font-bold md:text-4xl\">\n          <span className=\"gradient-text\"><Dashboard system></span>\n        </h1>\n        <p className=\"text-slate-400\">Welcome back! Here's your library overview.</p>\n      </div>\n\n      {/\\* Stats Grid \\*/}\n      <div className=\"mb-10 grid gap-4 md:grid-cols-2 lg:grid-cols-5\">\n        {/\\* Total Books \\*/}\n        <div className=\"stat-card group\">\n          <div className=\"absolute inset-0 bg-gradient-to-br from-blue-500/10 to-transparent opacity-0 transition-opacity group-hover:opacity-100\" />\n          <div className=\"relative\">\n            <div className=\"mb-4 flex h-12 w-12 items-center justify-center rounded-lg bg-blue-500/20 ring-1 ring-blue-500/30\">\n              <BookOpen className=\"h-6 w-6 text-blue-400\" />\n            </div>\n            <p className=\"mb-1 text-3xl font-bold text-white\">\n              {isLoading ? (\n                <span className=\"text-slate-500\">-</span>\n              ) : (\n                stats.totalBooks\n              )}\n            </p>\n            <p className=\"text-sm text-slate-400\">Total Books</p>\n          </div>\n        </div>\n\n        {/\\* Total Stock \\*/}\n        <div className=\"stat-card group\">\n          <div className=\"absolute inset-0 bg-gradient-to-br from-green-500/10 to-transparent opacity-0 transition-opacity group-hover:opacity-100\" />\n          <div className=\"relative\">\n            <div className=\"mb-4 flex h-12 w-12 items-center justify-center rounded-lg bg-green-500/20 ring-1 ring-green-500/30\">\n              <Package className=\"h-6 w-6 text-green-400\" />\n            </div>\n            <p className=\"mb-1 text-3xl font-bold text-white\">\n              {isLoading ? (\n                <span className=\"text-slate-500\">-</span>\n              ) : (\n                stats.totalStock\n              )}\n            </p>\n            <p className=\"text-sm text-slate-400\">Total Stock</p>\n          </div>\n        </div>\n\n        {/\\* Total Value \\*/}\n        <div className=\"stat-card group\">\n          <div className=\"absolute inset-0 bg-gradient-to-br from-purple-500/10 to-transparent opacity-0 transition-opacity group-hover:opacity-100\" />\n          <div className=\"relative\">\n            <div className=\"mb-4 flex h-12 w-12 items-center justify-center rounded-lg bg-purple-500/20 ring-1 ring-purple-500/30\">\n              <TrendingUp className=\"h-6 w-6 text-purple-400\" />\n            </div>\n            <p className=\"mb-1 text-3xl font-bold text-white\">\n              {isLoading ? (\n                <span className=\"text-slate-500\">-</span>\n              ) : (\n                `$`{stats.totalValue / 1000}.${(stats.totalValue % 1000) / 100}k\n              )}\n            </p>\n            <p className=\"text-sm text-slate-400\">Total Value</p>\n          </div>\n        </div>\n\n        {/\\* Categories \\*/}\n        <div className=\"stat-card group\">\n          <div className=\"absolute inset-0 bg-gradient-to-br from-orange-500/10 to-transparent opacity-0 transition-opacity group-hover:opacity-100\" />\n          <div className=\"relative\">\n            <div className=\"mb-4 flex h-12 w-12 items-center justify-center rounded-lg bg-orange-500/20 ring-1 ring-orange-500/30\">\n              <Layers className=\"h-6 w-6 text-orange-400\" />\n            </div>\n            <p className=\"mb-1 text-3xl font-bold text-white\">\n              {isLoading ? (\n                <span className=\"text-slate-500\">-</span>\n              ) : (\n                stats.categoriesCount\n              )}\n            </p>\n            <p className=\"text-sm text-slate-400\">Categories</p>\n          </div>\n        </div>\n\n        {/\\* Low Stock Alert \\*/}\n        <div className=\"stat-card group\">\n          <div className=\"absolute inset-0 bg-gradient-to-br from-red-500/10 to-transparent opacity-0 transition-opacity group-hover:opacity-100\" />\n          <div className=\"relative\">\n            <div className=\"mb-4 flex h-12 w-12 items-center justify-center rounded-lg bg-red-500/20 ring-1 ring-red-500/30\">\n              <AlertCircle className=\"h-6 w-6 text-red-400\" />\n            </div>\n            <p className=\"mb-1 text-3xl font-bold text-white\">\n              {isLoading ? (\n                <span className=\"text-slate-500\">-</span>\n              ) : (\n                stats.lowStockBooks\n              )}\n            </p>\n            <p className=\"text-sm text-slate-400\">Low Stock</p>\n          </div>\n        </div>\n      </div>\n\n      {/\\* Recent Books Section \\*/}\n      <div className=\"rounded-xl border border-white/10 bg-slate-900/50 backdrop-blur-xl\">\n        <div className=\"border-b border-white/10 px-6 py-5\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h2 className=\"text-xl font-bold text-white\">Recent Books</h2>\n              <p className=\"mt-1 text-sm text-slate-400\">Latest additions to your library</p>\n            </div>\n            <Link\n              href=\"/books\"\n              className=\"flex items-center gap-2 rounded-lg bg-blue-500/20 px-4 py-2 text-sm font-medium text-blue-400 transition-colors hover:bg-blue-500/30\"\n            >\n              View All\n              <ArrowRight className=\"h-4 w-4\" />\n            </Link>\n          </div>\n        </div>\n\n        {isLoading ? (\n          <div className=\"flex items-center justify-center px-6 py-12\">\n            <Loader className=\"h-6 w-6 animate-spin text-blue-500\" />\n          </div>\n        ) : error ? (\n          <div className=\"px-6 py-12 text-center\">\n            <p className=\"text-red-400\">Failed to load books. Please try again.</p>\n          </div>\n        ) : recentBooks.length === 0 ? (\n          <div className=\"flex flex-col items-center justify-center px-6 py-12\">\n            <BookOpen className=\"mb-3 h-12 w-12 text-slate-600\" />\n            <p className=\"text-slate-400\">No books yet. Start by adding your first book!</p>\n            <Link\n              href=\"/books/new\"\n              className=\"mt-4 rounded-lg bg-blue-500 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-blue-600\"\n            >\n              Add Book\n            </Link>\n          </div>\n        ) : (\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full\">\n              <thead className=\"border-b border-white/10 bg-slate-800/30\">\n                <tr>\n                  <th className=\"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-400\">\n                    Title\n                  </th>\n                  <th className=\"hidden px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-400 sm:table-cell\">\n                    Authors\n                  </th>\n                  <th className=\"hidden px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-400 md:table-cell\">\n                    Category\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-400\">\n                    Stock\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-400\">\n                    Price\n                  </th>\n                  <th className=\"hidden px-6 py-3 text-right text-xs font-semibold uppercase tracking-wider text-slate-400 lg:table-cell\">\n                    Action\n                  </th>\n                </tr>\n              </thead>\n              <tbody className=\"divide-y divide-white/5\">\n                {recentBooks.map((book) => (\n                  <tr\n                    key={book.id}\n                    className=\"transition-colors hover:bg-slate-800/30\"\n                  >\n                    <td className=\"px-6 py-4\">\n                      <div className=\"flex items-start gap-3\">\n                        {book.cover_image ? (\n                          <img\n                            src={book.cover_image}\n                            alt={book.title}\n                            className=\"h-10 w-8 object-cover\"\n                          />\n                        ) : (\n                          <div className=\"flex h-10 w-8 items-center justify-center rounded bg-slate-700\">\n                            <BookOpen className=\"h-4 w-4 text-slate-400\" />\n                          </div>\n                        )}\n                        <div>\n                          <p className=\"font-medium text-white\">{book.title}</p>\n                          <p className=\"text-xs text-slate-500 sm:hidden\">\n                            {book.author}\n                          </p>\n                        </div>\n                      </div>\n                    </td>\n                    <td className=\"hidden px-6 py-4 text-sm text-slate-300 sm:table-cell\">\n                      {book.authors}\n                    </td>\n                    <td className=\"hidden px-6 py-4 text-sm text-slate-400 md:table-cell\">\n                      {book.category}\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <span\n                        className={`inline-flex rounded-full px-3 py-1 text-xs font-medium ${\n                          book.stock < 10\n                            ? 'bg-red-500/20 text-red-400'\n                            : 'bg-green-500/20 text-green-400'\n                        }`}\n                      >\n                        {book.stock}\n                      </span>\n                    </td>\n                    <td className=\"px-6 py-4 text-sm font-medium text-white\">\n                      ${book.price.toFixed(2)}\n                    </td>\n                    <td className=\"hidden px-6 py-4 text-right lg:table-cell\">\n                      <Link\n                        href={`/books/${book.id}/edit`}\n                        className=\"text-xs font-medium text-blue-400 transition-colors hover:text-blue-300\"\n                      >\n                        Edit\n                      </Link>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}"